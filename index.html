<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Al Syed Sales Point - Full System</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet"/>

<style>
/* ===== ORIGINAL CSS (NO CHANGE) ===== */
:root {
  --primary:#ff4b9a;
  --primary-dark:#c2185b;
  --accent:#ffcc00;
  --bg:#f7f7fb;
  --black:#111111;
  --card-bg:#ffffff;
}
body {
  background:var(--bg);
  font-family:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  color:var(--black);
  padding-bottom:70px;
}
.hidden{display:none!important}
.low-stock{color:#ff1744;font-weight:600}
</style>
</head>

<body>

<!-- ===== LOGIN OVERLAY (SAME) ===== -->
<div id="loginOverlay" style="position:fixed;inset:0;background:#000;display:flex;align-items:center;justify-content:center;z-index:9999;">
  <div style="background:#111;padding:24px;border-radius:18px;color:#fff;width:100%;max-width:380px;">
    <h4 class="text-center mb-2">Al Syed Sales Point</h4>
    <input id="loginEmail" class="form-control mb-2" placeholder="admin or staff">
    <input id="loginPassword" type="password" class="form-control mb-2" placeholder="password">
    <button class="btn w-100" style="background:linear-gradient(135deg,#ff4b9a,#fff);border:0;" onclick="fakeLogin()">Sign In</button>
    <small class="d-block text-center mt-2">admin/admin • staff/staff</small>
  </div>
</div>

<!-- ===== DASHBOARD (SAME UI) ===== -->
<div class="container my-3">
  <div class="row g-3">
    <div class="col-6 col-md-3">
      <div class="card p-3 shadow-sm">
        <div>Total Products</div>
        <h5 id="metricTotalProducts">0</h5>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card p-3 shadow-sm">
        <div>Total Orders</div>
        <h5 id="metricTotalOrders">0</h5>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card p-3 shadow-sm">
        <div>Total Sales</div>
        <h5 id="metricTotalSales">0 PKR</h5>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card p-3 shadow-sm">
        <div>Low Stock</div>
        <h5 id="metricLowStock">0</h5>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
/* =====================================================
   LOCAL STORAGE (AUTO SAVE)
===================================================== */
function saveData(){
  localStorage.setItem("asp_products",JSON.stringify(products));
  localStorage.setItem("asp_sales",JSON.stringify(sales));
  localStorage.setItem("asp_orders",JSON.stringify(orders));
  localStorage.setItem("asp_expenses",JSON.stringify(expenses));
}
function loadData(){
  products = JSON.parse(localStorage.getItem("asp_products")) || products;
  sales = JSON.parse(localStorage.getItem("asp_sales")) || [];
  orders = JSON.parse(localStorage.getItem("asp_orders")) || [];
  expenses = JSON.parse(localStorage.getItem("asp_expenses")) || [];
}

/* =====================================================
   CLEAN START (DEMO ZERO)
===================================================== */
let products = [
 {id:1,name:"Ruby Necklace",category:"Jewelry",purchase:15000,sale:20000,discount:18000,stock:300,sold:0},
 {id:2,name:"Matte Lipstick",category:"Cosmetics",purchase:300,sale:600,discount:450,stock:80,sold:0},
 {id:3,name:"Jewelry Set",category:"Jewelry",purchase:1200,sale:2400,discount:2000,stock:3,sold:0},
 {id:4,name:"Premium Bra Set",category:"Undergarments",purchase:800,sale:1500,discount:1300,stock:5,sold:0},
 {id:5,name:"Cotton Panty Pack",category:"Undergarments",purchase:200,sale:400,discount:350,stock:2,sold:0},
 {id:6,name:"Men Undershirt",category:"Undergarments",purchase:500,sale:900,discount:0,stock:10,sold:0}
];

let sales = [];     // ✅ DEMO SALE ZERO
let orders = [];
let expenses = [];
let staffLog = [];

let currentRole="";
let currentUserName="";

/* =====================================================
   LOGIN
===================================================== */
function fakeLogin(){
  const u=loginEmail.value.toLowerCase();
  const p=loginPassword.value.toLowerCase();
  if(u==="admin"&&p==="admin"){currentRole="admin";currentUserName="Admin";}
  else if(u==="staff"&&p==="staff"){currentRole="staff";currentUserName="Staff";}
  else{alert("Wrong login");return;}

  loadData();
  document.getElementById("loginOverlay").style.display="none";
  renderMetrics();
}

/* =====================================================
   DASHBOARD METRICS
===================================================== */
function renderMetrics(){
  document.getElementById("metricTotalProducts").innerText=products.length;
  document.getElementById("metricTotalOrders").innerText=orders.length;
  document.getElementById("metricTotalSales").innerText=
    sales.reduce((s,x)=>s+x.total,0).toLocaleString()+" PKR";
  document.getElementById("metricLowStock").innerText=
    products.filter(p=>p.stock<=5).length;
}

/* =====================================================
   SECRET ADMIN RESET (NO UI)
   CTRL + SHIFT + R
===================================================== */
document.addEventListener("keydown",function(e){
  if(currentRole==="admin" && e.ctrlKey && e.shiftKey && e.key==="R"){
    if(!confirm("RESET ALL SALES DATA?"))return;
    sales=[];orders=[];expenses=[];
    products.forEach(p=>p.sold=0);
    localStorage.clear();
    location.reload();
  }
});
</script>

</body>
</html>
